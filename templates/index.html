<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="{{ url_for('static', filename = 'abi.js') }}"></script>
</head>
<body>
    <h1>Получить информацию о дипломе</h1>
    <form>
        <label for="name">ФИО</label>
        <input type="text" name="fio" id="fio"/>
        <label for="snils">Снилс</label>
        <input type="text" name="snils" id="snils"/>
        <input type="submit" id="submit">
    </form>
    <div id="result"></div>
</body>
<script>
    let web3 = new Web3('http://localhost:7545');
    let contract_adr = '0x0F8045378fF125300Ea6C6ac0566C8896AcB4425';

    let contract = new web3.eth.Contract(abi, contract_adr);
    let wallet = '';

    ethereum.request({method: 'eth_requestAccounts'})
    .then(accounts=>{
        wallet = accounts[0];
        console.log(wallet);
    })
    .catch(error=>{
        alert(error);
    })
    ethereum.on('accountsChanged', (accounts)=>{
        wallet = accounts[0];
        console.log(wallet);
    });
<<<<<<< Updated upstream
    contract.methods.GetStudent('Ivanov Ivan', '123456').call()
    .then((data)=>{
        console.log(data);
    })
    .catch(error=>{
        console.log(error);
=======
    let button = document.getElementById("submit");
    button.addEventListener('click', (event)=>{
        event.preventDefault();
        let fio = document.getElementById("fio");
        let snils = document.getElementById("snils");
        contract.methods.GetDiploma(fio.value, snils.value)
        .call()
        .then((data)=>{
            let div = document.getElementById("result");
            let ul = document.createElement("ul");
            data.forEach(data=>{
                let li = document.createElement("li");
                li.textContent = "Номер: " + element[0] +
                                "\nФакультет: " + element[1] +
                                "\nДата выдачи: " + element[2] +
                                "\nСтатус: " + element[3];
                ul.appendChild(li);
            });
            div.appendChild(ul);
        })
        .catch(error=>{
            alert(error);
        });
>>>>>>> Stashed changes
    });
</script>
</html>